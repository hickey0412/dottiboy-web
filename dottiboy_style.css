body {
    font-family: "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
    text-align: center;
    margin: 0;
    min-height: 100vh;
    position: relative;
    color: #333;
}

/* 背景画像とモザイク処理 */
#bg-image {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; 
    background-image: url('bg_dottiboy.png'); 
    background-size: cover; background-position: center; background-repeat: no-repeat;
    filter: blur(8px); -webkit-filter: blur(8px);
}

h1 { color: #fff; text-shadow: 2px 2px 4px rgba(0,0,0,0.6); margin-top: 20px; }

/* レイアウト */
#main-layout {
    display: flex; flex-direction: row; justify-content: center; align-items: flex-start;
    gap: 30px;
    padding: 20px; 
    max-width: 1400px; /* カード拡大に合わせて全体の幅上限を緩和 */
    margin: 20px auto;
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    position: relative; z-index: 1;
}

@media (max-width: 1000px) { #main-layout { flex-direction: column; align-items: center; } }

/* ▼▼▼ 変更点：ゲームエリアの幅を広げる ▼▼▼ */
#game-container { flex: 3; width: 100%; max-width: 1000px; } 

/* 右サイドバー */
#sidebar { 
    flex: 1; min-width: 300px;
    background: #fff; padding: 20px; border-radius: 8px; 
    box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: left; 
    display: flex; flex-direction: column; gap: 20px;
}

/* プレイヤーリスト */
.player-item { padding: 12px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
.player-item.is-parent { background-color: #fff9c4; font-weight: bold; border-radius: 4px; }
.player-item.active-better { border: 2px solid #e91e63; background-color: #fce4ec; border-radius: 4px; }
.player-info { display: flex; align-items: center; gap: 5px; }
.history-btn { font-size: 11px; padding: 3px 8px; margin-left: 8px; cursor: pointer; background-color: #607d8b; color: white; border: none; border-radius: 4px; }

/* モーダル */
#setup-overlay, #history-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; justify-content: center; align-items: center; z-index: 100; }
#setup-box, #history-box { background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 450px; text-align: left; max-height: 80vh; overflow-y: auto; }
.input-group { margin-bottom: 15px; }
.player-name-input { width: 100%; padding: 8px; margin-bottom: 5px; box-sizing: border-box; }
#add-player-btn { width: 100%; padding: 8px; cursor: pointer; background: #eee; border: 1px solid #ccc; }
#start-game-btn { width: 100%; padding: 12px; cursor: pointer; background-color: #e91e63; color: white; border: none; font-size: 1.1em; border-radius: 5px; }

/* 履歴テーブル */
#history-table { width: 100%; border-collapse: collapse; margin-bottom: 15px; font-size: 14px; }
#history-table th, #history-table td { border-bottom: 1px solid #ddd; padding: 8px; text-align: center; }
#history-table th { background-color: #f2f2f2; }
.diff-plus { color: blue; font-weight: bold; }
.diff-minus { color: red; font-weight: bold; }
#close-history-btn { width: 100%; padding: 10px; background: #333; color: white; border: none; cursor: pointer; border-radius: 5px; }

/* ゲーム盤面 */
#status-bar { background: #fff; padding: 10px 20px; border-radius: 8px; display: inline-block; margin-bottom: 20px; font-weight: bold; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #ddd; }
#pyramid-board { display: flex; flex-direction: column; align-items: center; gap: 15px; margin-bottom: 15px; }
.board-row { display: flex; justify-content: center; gap: 10px; }

/* 質問カード */
.card {
    width: 150px; height: 100px;
    background-color: #fff; border: 2px solid #ccc;
    border-radius: 8px; padding: 8px; 
    font-size: 14px; font-weight: bold;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    transition: all 0.3s; box-shadow: 2px 2px 5px rgba(0,0,0,0.1); line-height: 1.4;
}
.card.active { border-color: #ff9800; box-shadow: 0 0 15px #ff9800; transform: scale(1.05); z-index: 10; }
.card.passed { background-color: #eee; color: #999; border-color: #ddd; }
.decision-btns { display: none; width: 100%; justify-content: space-around; margin-top: 8px; }
.card.active .decision-btns { display: flex; }
.btn-yes, .btn-no { border: none; color: white; padding: 6px 14px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 12px; }
.btn-yes { background-color: #e91e63; } .btn-no { background-color: #2196f3; }

/* ▼▼▼ 変更点：ゴールカードを拡大・文字調整 ▼▼▼ */
#result-row { display: flex; justify-content: center; gap: 10px; margin-top: 10px; min-height: 100px; }

.result-card {
    width: 150px; /* 質問カードと同じ幅 */
    height: 100px; /* 質問カードと同じ高さ */
    background-color: #333; color: #fff; border-radius: 8px;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    cursor: pointer; border: 3px solid transparent; position: relative;
    transition: transform 0.2s;
    font-size: 16px; /* 文字サイズUP */
}
.result-card strong {
    font-size: 28px; /* 倍率（x16など）を大きく表示 */
    margin-top: 5px;
}
.result-card:hover { opacity: 0.9; transform: translateY(-3px); }
.result-card.winner { background-color: #e91e63; animation: flash 1s infinite; border-color: #fff; }

.bet-markers-container { position: absolute; bottom: -28px; left: 0; width: 100%; display: flex; flex-wrap: wrap; justify-content: center; gap: 2px; }
.bet-marker { font-size: 9px; background: #fff; color: #333; border: 1px solid #333; padding: 1px 3px; border-radius: 3px; white-space: nowrap; opacity: 0.9; }

/* 操作パネル */
#control-panel { background: #fdfdfd; padding: 15px; border-radius: 8px; border: 2px solid #e0e0e0; }
#betting-controls { text-align: center; }
.bet-input-row { margin: 15px 0; font-size: 1.1em; }
#bet-amount { width: 80px; padding: 5px; font-size: 1.1em; text-align: center; }
.instruction-small { font-size: 0.9em; color: #666; }
#instruction-text { font-size: 1.1em; color: #d32f2f; font-weight: bold; margin: 0; }
#next-round-btn { padding: 12px 25px; font-size: 16px; cursor: pointer; background-color: #4CAF50; color: white; border: none; border-radius: 5px; margin-top: 10px; width: 100%; }

@keyframes flash { 0% { opacity: 1; } 50% { opacity: 0.6; } 100% { opacity: 1; } }